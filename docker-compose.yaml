version: "3.1"
services:
  zookeeper:
    image: "zookeeper:latest"
    ports:
      - "2181:2181"
    environment:
      ZOO_MY_ID: 1
      ZOO_PORT: 2181
      ALLOW_ANONYMOUS_LOGIN: "yes"

  store:
    image: docker.io/andrew-delph/store:store_image
    scale: 2
    depends_on:
      - zookeeper
    restart: always

  nginx:
    image: nginx:alpine
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    ports:
      - "80:80"
    depends_on:
      - store
